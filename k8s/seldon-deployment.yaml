apiVersion: machinelearning.seldon.io/v1
kind: SeldonDeployment
metadata:
  name: sentiment-classifier
  namespace: seldon
spec:
  name: sentiment-model
  predictors:
  - name: default
    replicas: 1
    componentSpecs:
    - spec:
        containers:
        - name: classifier
          image: sentiment-seldon:latest
          imagePullPolicy: IfNotPresent
          env:
          - name: MODEL_PATH
            value: /mnt/models/sentiment_model.pkl
          volumeMounts:
          - name: model-storage
            mountPath: /mnt/models
            readOnly: true
          resources:
            requests:
              memory: "256Mi"
              cpu: "200m"
            limits:
              memory: "512Mi"
              cpu: "500m"
        volumes:
        - name: model-storage
          hostPath:
            path: /tmp/models
            type: DirectoryOrCreate
    graph:
      name: classifier
      type: MODEL
      endpoint:
        type: REST
      children: []
      parameters:
        - name: model_name
          type: STRING
          value: sentiment-classifier
    engineResources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
